<header class="p-3 text-black ">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
        <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
          <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"></use></svg>
        </a>
        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0 mt-4">
          <li><a href="#" class="nav-link px-2 text-white"><img id="logo"  src="/img/nOke_logo.png" alt=""> </a></li>
          <li><a href="/" class="nav-link px-2 text-black">Women</a></li>
          <li><a href="/" class="nav-link px-2 text-black">Man</a></li>
          <li><a href="/" class="nav-link px-2 text-black">Children</a></li>
          {{#if acc.isAdmin}}
          <li><a href="/storage/edit" class="nav-link px-2 text-black">My Store</a></li>
          {{/if}}
          
        </ul>
        <form class="col-12 col-lg-auto mb-lg-0 me-lg-3" role="search" action="/">
          <input id="input_search" name="search" type="search" class="form-control form-control-dark text-black bg-light" placeholder="Search..." aria-label="Search">
        </form>
        {{#if acc.username}}
            <div class="text-end">
                <div class="row">
                   <div class="col-3">
                      <div class="inline  position-relative">
                            <h4 class="text-danger number_order position-absolute " id="number_cart">{{acc.number_cart}}</h4>
                            <svg type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling"  xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16">
                            <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
                          </svg>
                         
                      </div>
                   </div>
                   <div class="col-9">
                    <div class="dropdown">
              
                    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" >
                      {{acc.username}}
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                      {{#if acc.isAdmin}}
                        <li><a class="dropdown-item" href="/storage/edit">Edit</a></li>
                        <li><a class="dropdown-item" href="/storage/add">Add Shoes</a></li>
                      {{/if}}
                      <li><a class="dropdown-item" href="/logout">Logout</a></li>
                    </ul>
                </div>
                   </div>
                </div>
                
              
        {{else}}
          <div class="text-end">
            <button id="btn_signin" type="button" class="btn btn-outline-primary">Sign in</button>
          </div>
        {{/if}}
    
        </div>
      </div>
    </div>
    <div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasScrollingLabel">CART</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
            {{#each acc.cart}}
           <div class="card mb-3" style="max-width: 540px;">
              <div class="row g-0">
                <div class="col-md-4">
                  <img width="100%" height="100%" src="{{this.linkcart}}" class="img-fluid rounded-start" alt="#">
                </div>
                <div class="col-md-8">
                  <div class="card-body">
                    <h5 class="card-title">{{this.name}}</h5>
                    <p class="card-text">Size {{this.size}} </p>
                    <p class="card-text"><small class="text-muted">{{this.price}}</small></p>
                    
                    <p style="font-size: 16px;" class="card-text float-start"> <a href="/my/pay">Pay</a></p>
                    
                    <svg class="float-end mt-1 btn-delete-cart" data-id-cart="{{@index}}" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                      <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                    </svg>
                    </div>
  
                  </div>
                </div>
            </div>
            {{/each}}
</div>
  </div>
</div>
<form name="form_delete_cart" method="POST" action="#">

</form>
    <script>
        const formdelete=document.forms["form_delete_cart"]
        const btnSignIn=document.getElementById("btn_signin")
          if ( btnSignIn){
            btnSignIn.addEventListener("click",(e)=>{
              window.location.replace("/login");
          })
        }

        const arr_btn_delete=document.getElementsByClassName("btn-delete-cart")
        Array.from(arr_btn_delete).forEach(el=>{
            el.addEventListener("click",()=>{
                   $.ajax({  
                          url:'/storage/deletecart',  
                          method:'post',  
                          dataType:'json',  
                          data:{
                              index:el.getAttribute("data-id-cart")
                          },  
                          success:function(response){ 
                              if(response.msg=='success'){  
                                  document.getElementById("number_cart").innerHTML=response.cart.length
                                  el.parentNode.parentNode.parentNode.parentNode.parentNode.removeChild(el.parentNode.parentNode.parentNode.parentNode)
                              }else{  
                                  alert('some error occurred try again');  
                              }  
                          },  
                          error:function(response){  
                              alert('server error occured')  
                          }  
                        });  
            })
        })




    </script>
  </header>